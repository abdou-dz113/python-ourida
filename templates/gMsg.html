<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">

    <title>Gestion des Messages</title>
    <style>
    /* ========== VARIABLES & RESET ========== */
:root {
  --primary: #4d90fe;
  --primary-dark: #357ae8;
  --secondary: #6c757d;
  --secondary-dark: #5a6268;
  --danger: #dc3545;
  --danger-dark: #c82333;
  --success: #28a745;
  --success-dark: #218838;
  --white: #fff;
  --light: #f8f9fa;
  --dark: #333;
  --gray: #ddd;
}
.lang-switcher {
    padding: 8px 12px;
    border-radius: 4px;
    border: 1px solid #ddd;
    margin-right: 15px;
    background-color: rgb(247, 243, 239);
}

/* Pour la langue arabe */
html[dir="rtl"] body {
    direction: rtl;
    text-align: right;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
/* Actions */
.action-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            background-color: #f1f1f1;
        }
        
        .btn-edit {
            color: #4d90fe;
        }
        
        .btn-delete {
            color: #dc3545;
        }

/* ========== IMAGES ========== */
.travel-image {
        width: 60px;
        height: 40px;
        object-fit: cover;
        border-radius: 4px;
    }

/* ========== BASE STYLES ========== */
body {
      font-family: 'Arial', sans-serif;
      background: url('https://images.unsplash.com/photo-1436491865332-7a61a109cc05?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2074&q=80') no-repeat center center fixed;
      background-size: cover;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      position: relative;
    }

/* ========== LAYOUT ========== */
.container {
  max-width: 1200px;
  margin: 0 auto;
  background:  rgba(255, 255, 255, 0.5);
  border-radius: 8px;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.header {
  padding: 20px 30px;
  background: linear-gradient(135deg, #6B73FF 0%, #000DFF 100%);
  color: var(--white);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.header h1 {
  font-size: 24px;
  font-weight: 600;
}

.main-content {
  padding: 30px;
}

/* ========== SEARCH & FILTERS ========== */
.search-filter-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25px;
  flex-wrap: wrap;
  gap: 15px;
}

.search-box {
  flex: 1;
  min-width: 300px;
  max-width: 500px;
}

.search-box input {
  width: 100%;
  padding: 12px 20px;
  border: 1px solid var(--gray);
  border-radius: 6px;
  font-size: 14px;
  transition: all 0.3s;
}

.search-box input:focus {
  border-color: var(--primary);
  outline: none;
  box-shadow: 0 0 0 2px rgba(77, 144, 254, 0.2);
}

.filter-group {
  display: flex;
  align-items: center;
  gap: 15px;
  flex-wrap: wrap;
}

.filter-group label {
  font-weight: 500;
  color: #555;
}

.filter-group select {
  padding: 12px 15px;
  border: 1px solid var(--gray);
  border-radius: 6px;
  background-color: var(--white);
  font-size: 14px;
  min-width: 180px;
}

/* ========== BUTTONS ========== */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 12px 20px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.btn i {
  margin-right: 8px;
}

.btn-primary {
            background-color: #4d90fe;
            color: white;
        }
        
.btn-primary:hover {
    background-color: #357ae8;
}
        
        .btn-success {
            background-color: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #218838;
        }

.btn-secondary {
  background-color: var(--secondary);
  color: var(--white);
}

.btn-secondary:hover {
  background-color: var(--secondary-dark);
}

.btn-danger {
  background-color: var(--danger);
  color: var(--white);
}

.btn-danger:hover {
  background-color: var(--danger-dark);
}

/* ========== TABLE ========== */
.table-responsive {
  overflow-x: auto;
  margin-bottom: 25px;
  border-radius: 6px;
  border: 1px solid #eee;
}

table {
  width: 100%;
  border-collapse: collapse;
  min-width: 800px;
}

th, td {
  padding: 15px;
  text-align: left;
  border-bottom: 1px solid #eee;
}

th {
  background-color: var(--light);
  font-weight: 600;
  color: #555;
  text-transform: uppercase;
  font-size: 13px;
  letter-spacing: 0.5px;
}

tr:hover {
  background-color: var(--light);
}

/* ========== STATUS BADGES ========== */
.status {
  display: inline-block;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 500;
}

.status-active {
  background-color: #d4edda;
  color: #155724;
}

.status-inactive {
  background-color: #f8d7da;
  color: #721c24;
}

.status-pending {
  background-color: #fff3cd;
  color: #856404;
}

.status-archived {
  background-color: #e2e3e5;
  color: #383d41;
}

/* ========== MODALS ========== */
.modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 1000;
  overflow-y: auto;
}

.modal-content {
  background-color: var(--white);
  margin: 50px auto;
  border-radius: 8px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  width: 90%;
  max-width: 600px;
  animation: modalopen 0.3s;
}

@keyframes modalopen {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}

.modal-header {
  padding: 20px;
  border-bottom: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-title {
  font-size: 20px;
  font-weight: 600;
}

.close-btn {
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
  color: #777;
}

.modal-body {
  padding: 20px;
}

.modal-footer {
  padding: 20px;
  border-top: 1px solid #eee;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

/* ========== FORM ELEMENTS ========== */
.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  margin-bottom: 8px;
  font-weight: 500;
  color: #555;
}

.form-group input,
.form-group select {
  width: 100%;
  padding: 12px 15px;
  border: 1px solid var(--gray);
  border-radius: 6px;
  font-size: 14px;
  transition: all 0.3s;
}

.form-group input:focus,
.form-group select:focus {
  border-color: var(--primary);
  outline: none;
  box-shadow: 0 0 0 2px rgba(77, 144, 254, 0.2);
}

.image-preview {
  margin-top: 10px;
  width: 100px;
  height: 100px;
  border: 1px dashed var(--gray);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

/* ========== RESPONSIVE ========== */
@media (max-width: 768px) {
  .header {
    flex-direction: column;
    align-items: flex-start;
    gap: 15px;
  }
  
  .search-filter-bar {
    flex-direction: column;
    align-items: stretch;
  }
  
  .search-box {
    max-width: 100%;
  }
  
  .filter-group {
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
  }
  
  .modal-content {
    width: 95%;
    margin: 20px auto;
  }
}
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 data-translate="Les messages des clients">Les messages des clients</h1>
            <div>
                <select id="langSwitcher" class="lang-switcher">
                    <option value="fr">Français</option>
                    <option value="en">English</option>
                    <option value="ar">العربية</option>
                </select>
            </div>
        </div>

        <div class="table-responsive">
            <table id="travelsTable" aria-describedby="tableDescription">
                <caption id="tableDescription" class="sr-only">Liste des messages</caption>
                <thead>
                    <tr>
                        <th scope="col">ID</th> <!-- Nouvelle colonne -->
                        <th scope="col" data-translate="Nom">Nom</th>
                        <th scope="col" data-translate="email">email</th>
                        <th scope="col">Tél</th>
                        <th scope="col" data-translate="Date">Date</th>
                        <th scope="col" data-translate="message">message</th>
                        <th scope="col" data-translate="Actions">Actions</th>
                    </tr>
                </thead>
                <tbody id="travelsTableBody">
                    <!-- Contenu dynamique -->
                </tbody>
            </table>
        </div>

        <nav class="pagination" id="pagination" aria-label="Pagination">
            <!-- Pagination dynamique -->
        </nav>
    </div>

    <!-- Modal de confirmation -->
    <div id="confirmModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="confirmTitle" style="display:none;">
        <div class="modal-content">
            <div class="modal-body">
                <p id="confirmTitle">Êtes-vous sûr de vouloir supprimer ce message?</p>
            </div>
            <div class="modal-footer">
                <button id="confirmDeleteBtn" class="btn btn-danger">Supprimer</button>
                <button id="cancelDeleteBtn" class="btn btn-secondary">Annuler</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const langSwitcher = document.getElementById('langSwitcher');
            const travelsTableBody = document.getElementById('travelsTableBody');
            const confirmModal = document.getElementById('confirmModal');
            const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
            const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
            const tableDescription = document.getElementById('tableDescription');

            let travelsData = [
                { name: "Ahmed Zerrouki", email: "jahmedzerrouki@email.com", tel: "0660112456", date: "2025-05-10", message: "je souhaite la date de mon voyage reserve pour Tunisie,initialement prevu le 20 juin,et le declarer au 25 juin,si possible." },
                { name: "Asma Boumediane", email: "asma58@email.com", tel: "0579875500", date: "2025-05-11", message: "service client impeccable,Merci !" }
            ];
            let deleteIndex = null;

            function renderTable() {
                travelsTableBody.innerHTML = '';
                travelsData.forEach((travel, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                          <td>${index + 1}</td> <!-- Ajout de l'ID -->
    <td>${travel.name}</td>
    <td>${travel.email}</td>
    <td>${travel.tel}</td>
    <td>${travel.date}</td>
    <td>${travel.message}</td>
    <td>
        <button class="action-btn btn-delete" data-index="${index}">Delete</button>
    </td>
                    `;
                    travelsTableBody.appendChild(row);
                });

                document.querySelectorAll('.btn-delete').forEach(button => {
                    button.addEventListener('click', function () {
                        deleteIndex = parseInt(this.getAttribute('data-index'));
                        confirmModal.style.display = 'block';
                    });
                });
            }

            confirmDeleteBtn.addEventListener('click', function () {
                if (deleteIndex !== null) {
                    travelsData.splice(deleteIndex, 1);
                    renderTable();
                    confirmModal.style.display = 'none';
                    deleteIndex = null;
                }
            });

            cancelDeleteBtn.addEventListener('click', function () {
                confirmModal.style.display = 'none';
                deleteIndex = null;
            });

            langSwitcher.addEventListener('change', function () {
                const lang = langSwitcher.value;
                setLanguage(lang);
            });

            function setLanguage(language) {
                const elementsToTranslate = document.querySelectorAll('[data-translate]');
                elementsToTranslate.forEach(element => {
                    const key = element.getAttribute('data-translate');
                    element.textContent = getTranslation(key, language);
                });
                tableDescription.textContent = getTranslation('Liste des messages', language);
            }

            function getTranslation(key, language) {
                const translations = {
                    'Nom': { fr: 'Nom', en: 'Name', ar: 'الاسم' },
                    'email': { fr: 'Email', en: 'Email', ar: 'البريد الإلكتروني' },
                    'message': { fr: 'Message', en: 'Message', ar: 'الرسالة' },
                    'Les messages des clients': { fr: 'Les messages des clients', en: 'Customer Messages', ar: 'رسائل العملاء' },
                    'Date': { fr: 'Date', en: 'Date', ar: 'التاريخ' },
                    'Actions': { fr: 'Actions', en: 'Actions', ar: 'الإجراءات' },
                    'Liste des messages': { fr: 'Liste des messages', en: 'Message List', ar: 'قائمة الرسائل' }
                };
                return translations[key] ? translations[key][language] : key;
            }

            renderTable();
        });
    </script>
</body>
